{% extends "base.html" %}
{% block title %}Panel de Administraci√≥n{% endblock %}

{% block content %}
<h2>Panel de Administraci√≥n</h2>

<!-- Resumen de m√©tricas -->
<div class="dashboard-summary">
  <div class="summary-card">
    <h3>{{ total_events }}</h3>
    <p>Eventos Disponibles</p>
  </div>
  <div class="summary-card">
    <h3>{{ out_of_stock }}</h3>
    <p>Agotados</p>
  </div>
  <div class="summary-card">
    <h3>{{ total_orders }}</h3>
    <p>Compras realizadas</p>
  </div>
</div>

<!-- √öltimos pedidos -->
<h3>√öltimos pedidos</h3>
<table class="table">
  <thead>
    <tr>
      <th>ID</th>
      <th>Cliente</th>
      <th>Fecha</th>
      <th>Total</th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    {% for order in last_orders %}
      <tr>
        <td>#{{ order.id }}</td>
        <td>{{ order.customer_name }}</td>
        <td>{{ order.created_at|date:"d/m/Y H:i" }}</td>
        <td>${{ order.total }}</td>
        <td><a href="{% url 'order_detail' order.id %}">Ver</a></td>
      </tr>
    {% empty %}
      <tr><td colspan="5">No hay compras a√∫n.</td></tr>
    {% endfor %}
  </tbody>
</table>

<div class="admin-section">
    <h3>Gesti√≥n de lugares y mapas de asientos</h3>
    <a href="{% url 'admin:core_venue_changelist' %}" class="btn btn-primary">Gestionar lugares</a>
    <a href="{% url 'admin:core_section_changelist' %}" class="btn btn-primary">Gestionar secciones</a>
    
    <!-- Lista de venues con enlace al dise√±ador -->
    <div class="venue-list">
        <h4>Lugares disponibles:</h4>
        <ul>
            {% for venue in venues %}
            <li>
                {{ venue.name }}
                <a href="{% url 'venue_designer' venue.id %}" class="btn btn-sm">Dise√±ar Secciones</a>
            </li>
            {% endfor %}
        </ul>
    </div>
</div>

<!-- Acceso r√°pido -->
<div class="admin-menu">
  <a href="{% url 'create_events' %}" class="card-link">
    <div class="admin-card">‚ûï Nuevo evento</div>
  </a>
  <a href="{% url 'admin_dashboard_events' %}" class="card-link">
    <div class="admin-card">üì¶ Gestionar eventos</div>
  </a>
  <a href="{% url 'order_list' %}" class="card-link">
    <div class="admin-card">üßæ Pedidos recibidos</div>
  </a>
</div>
{% endblock %}
